//peak.js
var peak={};peak.reset=function(){peak.bufferLoader=null,peak.bufferList=null,peak.buffer=null,peak.context=null,peak.callback=null,peak.sampleRate=null,peak.sampleSize=1,peak.lengthInSeconds=null,peak.manupulate=null},peak.reset(),peak.loaded=function(e){peak.bufferList=e,peak.buffer=peak.bufferList[0];var t=peak.buffer.getChannelData(0),n=[];for(var r=0,i=0;r<t.length;r+=peak.sampleSize)peak.manipulate!==null&&peak.manipulate!==undefined?n[i]=peak.manipulate(t[r]):n[i]=t[r]+0,i++;peak.callback!==null&&(peak.callback(n),peak.reset())},peak.get=function(e,t,n,r,i,s){if(t===undefined)throw"Please provide path to audio file";peak.callback=e,n&&(peak.sampleRate=n||48e3),s&&(peak.manipulate=s||null),i&&(peak.sampleSize=i||1),typeof webkitOfflineAudioContext=="function"?peak.context=new webkitOfflineAudioContext(1,n*r,n):peak.context=new webkitAudioContext(1,n*r,n),peak.bufferLoader=new BufferLoader(peak.context,t,peak.loaded),peak.bufferLoader.load()}
